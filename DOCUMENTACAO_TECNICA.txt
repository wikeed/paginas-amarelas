================================================================================
        DOCUMENTA√á√ÉO T√âCNICA - P√ÅGINAS AMARELAS
        Gerenciador de Biblioteca Pessoal de Livros
================================================================================

üìö VIS√ÉO GERAL DO PROJETO
================================================================================

O P√°ginas Amarelas √© uma aplica√ß√£o web full-stack que permite aos usu√°rios
gerenciar sua biblioteca pessoal de livros, descobrir novos livros atrav√©s
de APIs externas, e compartilhar suas leituras com outros usu√°rios atrav√©s
de um feed social.


================================================================================
üõ†Ô∏è TECNOLOGIAS UTILIZADAS
================================================================================

1. NEXT.JS 14 (App Router)
   ---------------------------
   O que √©: Framework React para desenvolvimento web moderno

   Como funciona:
   - Next.js √© como um "React turbinado" que facilita criar sites r√°pidos
   - O "App Router" √© a nova forma de organizar p√°ginas (pasta app/)
   - Cada pasta em app/ vira uma rota automaticamente
     Exemplo: app/dashboard/page.tsx ‚Üí site.com/dashboard

   Por que usamos:
   - Renderiza√ß√£o no servidor (p√°ginas carregam mais r√°pido)
   - Rotas din√¢micas f√°ceis (como /autor/[nome-do-autor])
   - API routes integradas (backend e frontend no mesmo projeto)


2. TYPESCRIPT
   ---------------------------
   O que √©: JavaScript com tipos (valida√ß√£o de dados)

   Como funciona:
   - √â JavaScript normal, mas voc√™ declara o "tipo" das vari√°veis
   - Exemplo: const nome: string = "Jo√£o" (s√≥ aceita texto)
   - Evita bugs antes mesmo de executar o c√≥digo

   Por que usamos:
   - C√≥digo mais seguro e confi√°vel
   - Autocompletar melhor no editor
   - Menos erros em produ√ß√£o


3. REACT 18
   ---------------------------
   O que √©: Biblioteca para criar interfaces interativas

   Como funciona:
   - Divide a interface em "componentes" (pecinhas reutiliz√°veis)
   - Cada componente √© uma fun√ß√£o que retorna HTML (JSX)
   - "Estados" (useState) permitem que a tela reaja a mudan√ßas

   Por que usamos:
   - Criar interfaces din√¢micas e reativas
   - Componentes reutiliz√°veis (DRY - Don't Repeat Yourself)
   - Ecossistema enorme de bibliotecas


4. TAILWIND CSS
   ---------------------------
   O que √©: Framework CSS utilit√°rio

   Como funciona:
   - Ao inv√©s de escrever CSS separado, voc√™ usa "classes prontas"
   - Exemplo: className="bg-blue-500 text-white p-4"
   - Gera apenas o CSS usado (arquivo final pequeno)

   Por que usamos:
   - Desenvolvimento muito mais r√°pido
   - Design consistente (cores, espa√ßamentos padronizados)
   - Responsivo f√°cil (sm:, md:, lg: para diferentes telas)


5. PRISMA ORM
   ---------------------------
   O que √©: Ferramenta para trabalhar com banco de dados

   Como funciona:
   - Define a estrutura dos dados em prisma/schema.prisma
   - Gera c√≥digo TypeScript para acessar o banco
   - Exemplo: prisma.book.findMany() (busca todos os livros)
   - Migrations: registra mudan√ßas no banco de dados

   Por que usamos:
   - N√£o precisa escrever SQL na m√£o
   - Type-safety: TypeScript valida as queries
   - Migrations autom√°ticas


6. POSTGRESQL (via Supabase)
   ---------------------------
   O que √©: Banco de dados relacional robusto

   Como funciona:
   - Armazena dados em tabelas (como planilhas)
   - Tabelas principais: users, books
   - Relacionamentos: 1 user tem v√°rios books

   Por que usamos:
   - Confi√°vel e escal√°vel
   - Suporte a queries complexas
   - Supabase oferece hosting gr√°tis


7. NEXTAUTH.JS
   ---------------------------
   O que √©: Biblioteca de autentica√ß√£o para Next.js

   Como funciona:
   - Gerencia login/logout automaticamente
   - Cria "sess√µes" (sabe quem est√° logado)
   - Middleware protege rotas privadas
   - Usa bcryptjs para criptografar senhas

   Por que usamos:
   - Autentica√ß√£o segura sem escrever tudo do zero
   - Sess√µes persistem (usu√°rio continua logado)
   - Integra√ß√£o perfeita com Next.js


8. REACT HOOK FORM + ZOD
   ---------------------------
   O que √©: Gerenciamento de formul√°rios + valida√ß√£o

   Como funciona:
   - React Hook Form: controla inputs sem re-renderizar demais
   - Zod: define regras de valida√ß√£o
     Exemplo: z.string().min(3) (texto com m√≠nimo 3 caracteres)
   - Se dados inv√°lidos, mostra erros antes de enviar

   Por que usamos:
   - Formul√°rios perform√°ticos
   - Valida√ß√£o declarativa (f√°cil de ler e manter)
   - TypeScript integrado


9. SWR (Stale-While-Revalidate)
   ---------------------------
   O que √©: Biblioteca para buscar dados da API

   Como funciona:
   - useSWR('/api/books', fetcher) busca dados
   - Cache: mostra dados antigos enquanto busca novos
   - Revalida√ß√£o autom√°tica (sempre atualizado)
   - mutate(): atualiza cache manualmente

   Por que usamos:
   - UX melhor (dados aparecem instantaneamente)
   - Menos c√≥digo (loading/error autom√°ticos)
   - Cache inteligente


10. GOOGLE BOOKS API + OPEN LIBRARY API
    ---------------------------
    O que √©: APIs p√∫blicas com informa√ß√µes de milh√µes de livros

    Como funciona:
    - Enviam requisi√ß√µes HTTP para buscar livros
    - Retornam JSON com t√≠tulo, autor, capa, resumo, etc.
    - Estrat√©gia de fallback: tenta Google Books PT ‚Üí Google Books EN ‚Üí Open Library

    Por que usamos:
    - Autocomplete ao adicionar livros
    - Busca por autor
    - Capas e metadados autom√°ticos


================================================================================
üìÇ ESTRUTURA DO PROJETO
================================================================================

paginas-amarelas/
‚îÇ
‚îú‚îÄ‚îÄ app/                          # Rotas da aplica√ß√£o (App Router)
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                 # P√°gina inicial (login/registro)
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx               # Layout global (HTML, Providers)
‚îÇ   ‚îú‚îÄ‚îÄ globals.css              # Estilos globais + Tailwind
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ api/                     # Backend (API Routes)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/                # Autentica√ß√£o (NextAuth)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ books/               # CRUD de livros
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ feed/                # Feed social
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ google-books/        # Proxy para APIs de livros
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile/             # Perfil do usu√°rio
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ upload/              # Upload de imagens
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/               # Biblioteca do usu√°rio
‚îÇ   ‚îú‚îÄ‚îÄ feed/                    # Feed de atividades
‚îÇ   ‚îú‚îÄ‚îÄ profile/                 # Edi√ß√£o de perfil
‚îÇ   ‚îú‚îÄ‚îÄ autor/[author]/          # P√°gina din√¢mica de autor
‚îÇ   ‚îî‚îÄ‚îÄ u/[username]/            # Perfil p√∫blico de usu√°rio
‚îÇ
‚îú‚îÄ‚îÄ components/                   # Componentes React reutiliz√°veis
‚îÇ   ‚îú‚îÄ‚îÄ layout/                  # AppHeader, Navigation
‚îÇ   ‚îú‚îÄ‚îÄ auth/                    # SessionGate
‚îÇ   ‚îú‚îÄ‚îÄ feed/                    # FeedItem, FeedList, etc.
‚îÇ   ‚îú‚îÄ‚îÄ books/                   # PublicBookCard, etc.
‚îÇ   ‚îú‚îÄ‚îÄ BookCard.tsx             # Card de livro (dashboard)
‚îÇ   ‚îú‚îÄ‚îÄ Modal.tsx                # Modal base (reutiliz√°vel)
‚îÇ   ‚îú‚îÄ‚îÄ CreateBookModal.tsx      # Modal de cria√ß√£o (com autocomplete)
‚îÇ   ‚îú‚îÄ‚îÄ AddExternalBookModal.tsx # Modal para adicionar da API
‚îÇ   ‚îú‚îÄ‚îÄ AddFromFeedModal.tsx     # Modal simplificado (sem API)
‚îÇ   ‚îú‚îÄ‚îÄ ConfirmDialog.tsx        # Di√°logo de confirma√ß√£o estilizado
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ lib/                          # Utilit√°rios e configura√ß√µes
‚îÇ   ‚îú‚îÄ‚îÄ auth.ts                  # Configura√ß√£o NextAuth
‚îÇ   ‚îú‚îÄ‚îÄ prisma.ts                # Cliente Prisma (singleton)
‚îÇ   ‚îú‚îÄ‚îÄ validations.ts           # Schemas Zod
‚îÇ   ‚îú‚îÄ‚îÄ text.ts                  # Fun√ß√µes de busca/formata√ß√£o
‚îÇ   ‚îî‚îÄ‚îÄ supabase.ts              # Cliente Supabase (storage)
‚îÇ
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma            # Schema do banco de dados
‚îÇ   ‚îú‚îÄ‚îÄ migrations/              # Hist√≥rico de mudan√ßas no banco
‚îÇ   ‚îî‚îÄ‚îÄ seed.ts                  # Dados iniciais (opcional)
‚îÇ
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îî‚îÄ‚îÄ uploads/                 # Imagens de capas/perfis
‚îÇ
‚îú‚îÄ‚îÄ middleware.ts                # Prote√ß√£o de rotas (autentica√ß√£o)
‚îú‚îÄ‚îÄ next.config.js               # Configura√ß√£o Next.js
‚îú‚îÄ‚îÄ tailwind.config.ts           # Configura√ß√£o Tailwind
‚îî‚îÄ‚îÄ tsconfig.json                # Configura√ß√£o TypeScript


================================================================================
üîê COMO FUNCIONA A AUTENTICA√á√ÉO
================================================================================

FLUXO DE LOGIN/REGISTRO:
------------------------

1. Usu√°rio acessa "/" (p√°gina inicial)
   ‚Üí V√™ formul√°rio de login/registro (AuthForm.tsx)

2. REGISTRO:
   - Usu√°rio preenche: nome, username, senha, confirmar senha
   - Frontend: valida com Zod (registerSchema)
   - Envia POST /api/auth/register
   - Backend:
     * Valida dados novamente
     * Bcrypt criptografa a senha
     * Cria usu√°rio no banco (Prisma)
   - Redireciona para login

3. LOGIN:
   - Usu√°rio preenche: username, senha
   - Frontend: valida com Zod (loginSchema)
   - NextAuth envia credenciais para lib/auth.ts
   - Backend:
     * Busca usu√°rio no banco
     * Compara senha com bcrypt.compare()
     * Se correto, cria sess√£o JWT
   - NextAuth armazena sess√£o em cookie
   - Redireciona para /dashboard

4. PROTE√á√ÉO DE ROTAS:
   - middleware.ts intercepta todas as requisi√ß√µes
   - Verifica se rota precisa autentica√ß√£o (/dashboard, /feed, /profile)
   - Se n√£o tem sess√£o ‚Üí redireciona para "/"
   - SessionGate (client-side) tamb√©m valida e redireciona

5. SESS√ÉO PERSISTENTE:
   - Cookie httpOnly (mais seguro, JS n√£o acessa)
   - JWT com informa√ß√µes do usu√°rio
   - useSession() hook acessa sess√£o no frontend
   - getServerSession() acessa sess√£o no backend


================================================================================
üìñ COMO FUNCIONA O GERENCIAMENTO DE LIVROS
================================================================================

ADICIONAR LIVRO (com autocomplete):
-----------------------------------

1. Usu√°rio clica "+ Novo Livro" na dashboard
   ‚Üí Abre CreateBookModal.tsx

2. Digita t√≠tulo no campo de busca
   ‚Üí Debounce (500ms) para n√£o fazer muitas requisi√ß√µes

3. Frontend busca em /api/google-books?q=titulo&maxResults=5
   ‚Üí Backend tenta:
     1. Google Books API (portugu√™s)
     2. Google Books API (qualquer idioma)
     3. Open Library API
   ‚Üí Cache em mem√≥ria (1h) para n√£o repetir buscas

4. Usu√°rio clica em um resultado:
   ‚Üí Preenche automaticamente: t√≠tulo, autor, p√°ginas, resumo, capa
   ‚Üí didSelectSuggestion = true (trava autocomplete)

5. Usu√°rio ajusta campos (g√™nero, status, p√°gina atual, etc.)

6. Clica "Criar Livro":
   ‚Üí Frontend valida com bookSchema (Zod)
   ‚Üí POST /api/books
   ‚Üí Backend:
     * Valida novamente
     * Cria livro no banco vinculado ao userId
     * Retorna livro criado
   ‚Üí SWR mutate() revalida cache
   ‚Üí Modal fecha, livro aparece na dashboard


ADICIONAR LIVRO DA API (Feed ou P√°gina de Autor):
-------------------------------------------------

1. Usu√°rio v√™ livro no feed ou na p√°gina de autor

2. Clica no bot√£o "+" amarelo
   ‚Üí Abre AddExternalBookModal ou AddFromFeedModal

3. Campos pr√©-preenchidos:
   - T√≠tulo, autor, capa, resumo (da API)
   - externalId: "google:BOOK_ID" ou "openlibrary:KEY"

4. Usu√°rio escolhe status, rating (0-5 estrelas), anota√ß√µes

5. Clica "Adicionar":
   ‚Üí POST /api/books com externalId
   ‚Üí Backend verifica duplica√ß√£o:
     * Se externalId j√° existe para esse usu√°rio ‚Üí erro 409
     * Se n√£o existe ‚Üí cria livro
   ‚Üí Frontend atualiza estado local (bot√£o muda para ‚úì verde)


EDITAR LIVRO:
------------

1. Usu√°rio clica "Editar" no card
   ‚Üí Abre EditBookModal.tsx pr√©-preenchido

2. Altera campos desejados

3. Clica "Salvar":
   ‚Üí PUT /api/books/[id]
   ‚Üí Backend valida e atualiza
   ‚Üí SWR revalida cache


DELETAR LIVRO:
-------------

1. Usu√°rio clica "‚úï" no card
   ‚Üí Abre ConfirmDialog.tsx

2. Confirma exclus√£o
   ‚Üí DELETE /api/books/[id]
   ‚Üí Backend deleta do banco
   ‚Üí SWR revalida cache


================================================================================
üîç COMO FUNCIONA A BUSCA POR AUTOR
================================================================================

1. Usu√°rio clica no nome de um autor (BookCard, FeedItem, etc.)
   ‚Üí Navega para /autor/[author]

2. P√°gina autor/[author]/page.tsx:
   - useParams() pega nome do autor da URL
   - decodeURIComponent() decodifica espa√ßos/acentos
   - Busca em /api/google-books?q=autor&mode=author&maxResults=20

3. Backend (app/api/google-books/route.ts):
   - mode=author constr√≥i query especial:
     * Google Books: inauthor:"Nome do Autor"
     * Open Library: author:"Nome do Autor"
   - Retorna at√© 20 livros daquele autor

4. Frontend exibe grid de livros:
   - Se logado: mostra bot√£o "+" (adicionar)
   - Lista verifica libraryBooks (Set com externalId)
   - Se j√° tem ‚Üí mostra "‚úì" verde
   - Ao adicionar ‚Üí Set √© atualizado (sem duplica√ß√£o)


================================================================================
üì± COMO FUNCIONA O FEED SOCIAL
================================================================================

1. FeedPageClient.tsx busca /api/feed
   ‚Üí Backend retorna √∫ltimas atualiza√ß√µes de todos os usu√°rios

2. Pagina√ß√£o (cursor-based):
   - Primeiros 20 itens
   - Bot√£o "Carregar mais" busca pr√≥xima p√°gina
   - /api/feed?cursor=20 retorna itens 21-40

3. Cada FeedItem mostra:
   - Avatar e @ do usu√°rio
   - Livro adicionado/atualizado
   - Timestamp relativo ("h√° 2 horas")
   - Bot√£o "+" para adicionar √† pr√≥pria biblioteca

4. Verifica√ß√£o de biblioteca:
   - useEffect busca /api/books (livros do usu√°rio)
   - Cria Set com "titulo|autor" para lookup r√°pido
   - isBookInLibrary(titulo, autor) ‚Üí boolean
   - Se j√° tem ‚Üí mostra "‚úì" verde em vez de "+"


================================================================================
üé® PALETA DE CORES (Tailwind personalizado)
================================================================================

Primary (Azul escuro):   #1a1f3a - Fundo principal
Secondary (Ciano):       #22d3ee - Destaques, links
Accent (Verde):          #10b981 - Sucesso, completo
Text Muted:              #94a3b8 - Textos secund√°rios
Border:                  #334155 - Bordas

Gradientes:
- Amarelo ‚Üí Laranja: CTAs (bot√µes principais)
- Ciano ‚Üí Verde: Filtros ativos
- Vermelho: A√ß√µes destrutivas (deletar)


================================================================================
üóÉÔ∏è SCHEMA DO BANCO DE DADOS (Prisma)
================================================================================

MODEL USER:
----------
id          Int       (auto-incremento)
username    String    (√∫nico, obrigat√≥rio)
email       String    (√∫nico, opcional)
password    String    (hash bcrypt, obrigat√≥rio)
name        String    (opcional)
image       String    (URL da foto, opcional)
createdAt   DateTime  (autom√°tico)
updatedAt   DateTime  (autom√°tico)
books       Book[]    (rela√ß√£o 1:N)

MODEL BOOK:
----------
id          Int       (auto-incremento)
title       String    (obrigat√≥rio)
author      String    (obrigat√≥rio)
genre       String    (opcional)
pages       Int       (opcional)
currentPage Int       (opcional, para "Lendo")
status      String    (a-ler | lendo | lido)
summary     Text      (opcional)
coverUrl    String    (opcional)
coverSource String    (api | upload | manual)
externalId  String    (google:ID ou openlibrary:KEY, opcional)
rating      Int       (0-5, opcional)
notes       Text      (opcional)
createdAt   DateTime  (autom√°tico)
updatedAt   DateTime  (autom√°tico)
userId      Int       (FK para User)
user        User      (rela√ß√£o N:1)


================================================================================
üöÄ FLUXOS PRINCIPAIS DA APLICA√á√ÉO
================================================================================

1. FLUXO DE PRIMEIRO ACESSO:
   ----------------------------
   Acessa "/" ‚Üí V√™ login ‚Üí Clica "Cadastrar" ‚Üí Preenche dados ‚Üí
   POST /api/auth/register ‚Üí Redireciona login ‚Üí Faz login ‚Üí
   NextAuth cria sess√£o ‚Üí Redireciona /dashboard ‚Üí Dashboard vazia ‚Üí
   Clica "+ Novo Livro" ‚Üí Busca livro ‚Üí Adiciona ‚Üí Aparece na biblioteca


2. FLUXO DE DESCOBERTA:
   ----------------------------
   /dashboard ‚Üí Clica "Feed de Atividade" ‚Üí V√™ livros de outros usu√°rios ‚Üí
   Clica autor ‚Üí /autor/[author] ‚Üí Grid com livros do autor ‚Üí
   Clica "+" em um livro ‚Üí Modal abre ‚Üí Escolhe status/rating ‚Üí
   Adiciona ‚Üí Livro vai pra biblioteca ‚Üí Bot√£o muda para ‚úì


3. FLUXO DE PERFIL P√öBLICO:
   ----------------------------
   /feed ‚Üí Clica em @username ‚Üí /u/[username] ‚Üí V√™ biblioteca p√∫blica ‚Üí
   V√™ estat√≠sticas (total, a ler, lendo, lido) ‚Üí
   Clica em livro ‚Üí Modal de detalhes ‚Üí V√™ resumo/p√°ginas


4. FLUXO DE GERENCIAMENTO:
   ----------------------------
   /dashboard ‚Üí Filtra por "Lendo" ‚Üí Busca t√≠tulo ‚Üí Clica "Editar" ‚Üí
   Atualiza p√°gina atual ‚Üí Salva ‚Üí Progresso atualiza (%) ‚Üí
   Status muda para "Lido" ‚Üí Livro vai para filtro "Lido"


================================================================================
üîí SEGURAN√áA IMPLEMENTADA
================================================================================

1. SENHAS:
   - Nunca armazenadas em texto plano
   - Bcrypt hash com salt autom√°tico
   - Compara√ß√£o segura com bcrypt.compare()

2. SESS√ïES:
   - JWT assinado com NEXTAUTH_SECRET
   - Cookie httpOnly (JS n√£o acessa)
   - Expira ap√≥s per√≠odo inativo

3. VALIDA√á√ÉO:
   - Client-side: Zod valida antes de enviar
   - Server-side: Zod valida novamente (nunca confiar no client)
   - SQL Injection protegido (Prisma usa prepared statements)

4. AUTORIZA√á√ÉO:
   - Middleware bloqueia rotas n√£o autenticadas
   - APIs verificam session antes de executar
   - Usu√°rio s√≥ acessa/edita seus pr√≥prios livros

5. CORS/XSS:
   - Next.js sanitiza inputs automaticamente
   - Headers de seguran√ßa configurados
   - Upload de imagens validado


================================================================================
‚ö° OTIMIZA√á√ïES DE PERFORMANCE
================================================================================

1. CACHE:
   - SWR: cache em mem√≥ria no client
   - Google Books API: cache 1h no servidor
   - Imagens: Next.js Image otimiza automaticamente

2. DEBOUNCE:
   - Busca de livros: 500ms
   - Busca na dashboard: 400ms
   - Evita requisi√ß√µes desnecess√°rias

3. LAZY LOADING:
   - Imagens carregam sob demanda
   - Feed com pagina√ß√£o (20 items por vez)

4. CODE SPLITTING:
   - Next.js divide c√≥digo automaticamente
   - Cada p√°gina carrega apenas o necess√°rio

5. DATABASE:
   - √çndices em campos buscados (username, userId)
   - Queries otimizadas (select apenas campos necess√°rios)


================================================================================
üìù MELHORES PR√ÅTICAS APLICADAS
================================================================================

1. COMPONENTES REUTILIZ√ÅVEIS:
   - Modal.tsx usado por v√°rios modais
   - BookCard.tsx usado em dashboard e perfil
   - ConfirmDialog.tsx para confirma√ß√µes

2. DRY (Don't Repeat Yourself):
   - Fun√ß√µes utilit√°rias em lib/
   - Schemas Zod compartilhados
   - Estilos Tailwind consistentes

3. SEPARATION OF CONCERNS:
   - Frontend: componentes visuais
   - Backend: l√≥gica de neg√≥cio
   - Database: persist√™ncia
   - Auth: autentica√ß√£o isolada

4. TYPE SAFETY:
   - TypeScript em 100% do c√≥digo
   - Prisma gera tipos do banco
   - Zod valida runtime

5. C√ìDIGO LIMPO:
   - Nomes descritivos
   - Fun√ß√µes pequenas e focadas
   - Coment√°rios onde necess√°rio


================================================================================
üêõ TRATAMENTO DE ERROS
================================================================================

1. FRONTEND:
   - Try/catch em requisi√ß√µes
   - Estados de error exibidos ao usu√°rio
   - Fallbacks para dados ausentes

2. BACKEND:
   - Valida√ß√£o com Zod (retorna erros espec√≠ficos)
   - HTTP status codes apropriados (400, 401, 404, 500)
   - Logs de erro no console

3. BANCO DE DADOS:
   - Prisma trata erros de conex√£o
   - Unique constraints evitam duplica√ß√£o
   - Foreign keys mant√™m integridade


================================================================================
üìä ESTADO DA APLICA√á√ÉO
================================================================================

ESTADO LOCAL (useState):
- Modais abertos/fechados
- Livro selecionado
- Filtros ativos
- Query de busca

ESTADO GLOBAL (SWR):
- Lista de livros
- Itens do feed
- Dados de perfil
- Revalida√ß√£o autom√°tica

ESTADO DO SERVIDOR:
- Sess√£o (NextAuth)
- Banco de dados (Prisma)
- Cache de APIs


================================================================================
üéØ DECIS√ïES DE DESIGN
================================================================================

1. Por que App Router (n√£o Pages Router)?
   - Mais moderno e perform√°tico
   - Server Components por padr√£o
   - Layouts aninhados mais f√°ceis

2. Por que Tailwind (n√£o CSS puro)?
   - Desenvolvimento 5x mais r√°pido
   - Design system consistente
   - Purge autom√°tico (CSS m√≠nimo)

3. Por que Prisma (n√£o SQL puro)?
   - Type-safety completo
   - Migrations gerenciadas
   - Queries mais leg√≠veis

4. Por que NextAuth (n√£o implementa√ß√£o pr√≥pria)?
   - Seguran√ßa testada
   - Session management robusto
   - Suporte a m√∫ltiplos providers

5. Por que SWR (n√£o useEffect + fetch)?
   - Cache inteligente
   - Revalida√ß√£o autom√°tica
   - Menos c√≥digo boilerplate


================================================================================
üîÑ FLUXO DE DADOS COMPLETO (Exemplo: Adicionar Livro)
================================================================================

1. USER ACTION:
   Usu√°rio clica "+ Novo Livro"

2. FRONTEND (CreateBookModal.tsx):
   - useState abre modal
   - useForm gerencia inputs
   - Debounce busca sugest√µes

3. API CALL (busca):
   - fetch('/api/google-books?q=...')
   - Cache verifica se j√° buscou
   - Se n√£o, faz request para Google Books

4. GOOGLE BOOKS API:
   - Retorna JSON com livros
   - Normaliza√ß√£o unifica formato
   - Cache salva por 1h

5. FRONTEND (sele√ß√£o):
   - Usu√°rio clica em sugest√£o
   - Campos preenchem automaticamente
   - Autocomplete trava (didSelectSuggestion)

6. FRONTEND (submit):
   - useForm valida com Zod
   - Se v√°lido, POST /api/books
   - Loading state ativa

7. BACKEND (route.ts):
   - getServerSession verifica autentica√ß√£o
   - Zod valida payload
   - Prisma.book.create() insere no banco

8. DATABASE:
   - PostgreSQL executa INSERT
   - Retorna livro criado

9. BACKEND (response):
   - Retorna JSON com livro

10. FRONTEND (atualiza√ß√£o):
    - SWR mutate() revalida cache
    - Modal fecha
    - Livro aparece na dashboard
    - Loading state desativa


================================================================================
üåê DEPLOY (Vercel + Supabase)
================================================================================

FRONTEND (Vercel):
- Build: next build
- Serverless functions (API routes)
- CDN global
- HTTPS autom√°tico

DATABASE (Supabase):
- PostgreSQL gerenciado
- Connection pooling
- Backups autom√°ticos

ASSETS:
- public/uploads/ (local em dev)
- Supabase Storage (produ√ß√£o)


================================================================================
üí° CONCEITOS AVAN√áADOS SIMPLIFICADOS
================================================================================

1. SERVER COMPONENTS vs CLIENT COMPONENTS:
   - Server: renderizam no servidor (mais r√°pido, SEO melhor)
   - Client: "use client" (interatividade, useState, useEffect)
   - Hybrid: usa ambos conforme necess√°rio

2. MIDDLEWARE:
   - C√≥digo que roda ANTES da p√°gina carregar
   - Verifica autentica√ß√£o
   - Redireciona se necess√°rio

3. DEBOUNCE:
   - Aguarda usu√°rio parar de digitar
   - S√≥ ent√£o faz a busca
   - Economiza requisi√ß√µes

4. OPTIMISTIC UPDATES:
   - SWR atualiza UI antes da resposta do servidor
   - Se falhar, reverte
   - UX mais r√°pido

5. CURSOR-BASED PAGINATION:
   - Ao inv√©s de "p√°gina 2", usa "cursor=20"
   - Funciona melhor com dados din√¢micos
   - Evita itens duplicados


================================================================================
üìû APIs EXTERNAS USADAS
================================================================================

1. GOOGLE BOOKS API:
   Endpoint: https://www.googleapis.com/books/v1/volumes
   Params: q (query), maxResults, langRestrict, printType
   Rate limit: 1000 req/dia (gr√°tis)

2. OPEN LIBRARY API:
   Endpoint: https://openlibrary.org/search.json
   Params: q (query), limit
   Rate limit: Ilimitado (mas devemos ser gentis)


================================================================================
üéì TERMOS T√âCNICOS EXPLICADOS
================================================================================

- API: "Gar√ßom" que traz dados do servidor
- Component: Pe√ßa reutiliz√°vel da interface
- Hook: Fun√ß√£o especial do React (useState, useEffect)
- State: Dados que mudam e fazem a tela atualizar
- Props: Par√¢metros passados para componentes
- JWT: Token criptografado com info do usu√°rio
- ORM: Tradutor entre c√≥digo e banco de dados
- Schema: "Receita" da estrutura do banco
- Migration: Mudan√ßa registrada no banco
- Middleware: C√≥digo que roda "no meio" da requisi√ß√£o
- Debounce: Esperar antes de executar
- Cache: Mem√≥ria tempor√°ria para n√£o buscar de novo
- Mutation: Mudan√ßa de dados (POST, PUT, DELETE)
- Validation: Verificar se dados est√£o corretos
- Sanitization: Limpar dados maliciosos


================================================================================
‚úÖ CHECKLIST DE FUNCIONALIDADES
================================================================================

[‚úì] Autentica√ß√£o (login/registro)
[‚úì] Prote√ß√£o de rotas (middleware + SessionGate)
[‚úì] CRUD completo de livros
[‚úì] Autocomplete ao adicionar livro
[‚úì] Upload de capas
[‚úì] Filtros (A ler, Lendo, Lido)
[‚úì] Busca por t√≠tulo/autor
[‚úì] Progresso de leitura (%)
[‚úì] Feed social (√∫ltimas atividades)
[‚úì] Perfil p√∫blico
[‚úì] Explora√ß√£o por autor
[‚úì] Adicionar livros da API
[‚úì] Evitar duplica√ß√£o
[‚úì] Modal de confirma√ß√£o estilizado
[‚úì] Responsividade mobile
[‚úì] Dark mode (tema padr√£o)


================================================================================
üìö RECURSOS PARA APRENDER MAIS
================================================================================

Next.js: https://nextjs.org/docs
React: https://react.dev
TypeScript: https://www.typescriptlang.org/docs
Tailwind: https://tailwindcss.com/docs
Prisma: https://www.prisma.io/docs
NextAuth: https://next-auth.js.org


================================================================================
FIM DA DOCUMENTA√á√ÉO
================================================================================

Este projeto demonstra uma aplica√ß√£o full-stack moderna com:
- Arquitetura escal√°vel
- Boas pr√°ticas de c√≥digo
- UX pensada no usu√°rio
- Seguran√ßa implementada
- Performance otimizada

Criado com ‚ù§Ô∏è para gerenciar sua biblioteca de forma inteligente!
